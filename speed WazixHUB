--==============================================================--
--     CHILLI BOOSTER 29 + GUI ARCO-ÍRIS DO SEU SCRIPT
--==============================================================--

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer

-- Evita duplicar a GUI
if player.PlayerGui:FindFirstChild("ChilliBoost29") then
	player.PlayerGui.ChilliBoost29:Destroy()
end

--======================== CONFIG ==============================--

local SPEED = 27.4
local TOGGLE = Enum.KeyCode.F
local Enabled = false
local SpeedConn

--======================== GUI PRINCIPAL =========================--

local screenGui = Instance.new("ScreenGui", player.PlayerGui)
screenGui.Name = "ChilliBoost unjaps"
screenGui.ResetOnSpawn = false

local GUI_WIDTH = 250
local TITLE_HEIGHT = 25
local PADDING = 8
local BUTTON_HEIGHT = 45
local SPEED_LABEL_HEIGHT = 20
local GUI_INNER_HEIGHT = TITLE_HEIGHT + PADDING*3 + BUTTON_HEIGHT + SPEED_LABEL_HEIGHT
local GUI_OUTER_HEIGHT = GUI_INNER_HEIGHT + 20

local mainGuiFrame = Instance.new("Frame")
mainGuiFrame.Name = "MainFrame"
mainGuiFrame.Size = UDim2.new(0, GUI_WIDTH, 0, GUI_OUTER_HEIGHT)
mainGuiFrame.AnchorPoint = Vector2.new(1, 0)
mainGuiFrame.Position = UDim2.new(1, -10, 0, 205)
mainGuiFrame.BackgroundColor3 = Color3.fromRGB(35,35,50)
mainGuiFrame.BorderSizePixel = 0
mainGuiFrame.Parent = screenGui
Instance.new("UICorner", mainGuiFrame).CornerRadius = UDim.new(0,12)

local borderFrame = Instance.new("Frame")
borderFrame.Size = UDim2.new(1,0,1,0)
borderFrame.Position = UDim2.new(0,0,0,0)
borderFrame.BackgroundColor3 = Color3.fromRGB(255,255,255)
borderFrame.Parent = mainGuiFrame
Instance.new("UICorner", borderFrame).CornerRadius = UDim.new(0,12)

local rainbowGradient = Instance.new("UIGradient")
rainbowGradient.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, Color3.fromRGB(255,0,0)),
	ColorSequenceKeypoint.new(0.15, Color3.fromRGB(255,128,0)),
	ColorSequenceKeypoint.new(0.33, Color3.fromRGB(255,255,0)),
	ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0,255,0)),
	ColorSequenceKeypoint.new(0.66, Color3.fromRGB(0,128,255)),
	ColorSequenceKeypoint.new(0.82, Color3.fromRGB(0,0,255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(255,0,255)),
})
rainbowGradient.Parent = borderFrame

RunService.Heartbeat:Connect(function(dt)
	rainbowGradient.Rotation = (rainbowGradient.Rotation + dt * 60) % 360
end)

local innerFrame = Instance.new("Frame")
innerFrame.Size = UDim2.new(1,-6,1,-6)
innerFrame.Position = UDim2.new(0,3,0,3)
innerFrame.BackgroundColor3 = Color3.fromRGB(35,35,50)
innerFrame.Parent = borderFrame
Instance.new("UICorner", innerFrame).CornerRadius = UDim.new(0,10)

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1,0,0,TITLE_HEIGHT)
titleLabel.Position = UDim2.new(0,0,0,0)
titleLabel.Text = "WazixHUB speed "
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 16
titleLabel.TextColor3 = Color3.fromRGB(255,255,255)
titleLabel.BackgroundColor3 = Color3.fromRGB(45,45,60)
titleLabel.Parent = innerFrame
Instance.new("UICorner", titleLabel).CornerRadius = UDim.new(0,8)

-- Drag mobile + pc
do
	local dragging, dragStart, startPos

	local function beginDrag(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1
		or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = mainGuiFrame.Position
		end
	end

	local function endDrag(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1
		or input.UserInputType == Enum.UserInputType.Touch then
			dragging = false
		end
	end

	local function dragMoved(input)
		if dragging then
			local delta = input.Position - dragStart
			mainGuiFrame.Position = UDim2.new(
				startPos.X.Scale, startPos.X.Offset + delta.X,
				startPos.Y.Scale, startPos.Y.Offset + delta.Y
			)
		end
	end

	titleLabel.InputBegan:Connect(beginDrag)
	titleLabel.InputEnded:Connect(endDrag)
	UIS.InputChanged:Connect(dragMoved)
end

local speedLabel = Instance.new("TextLabel")
speedLabel.Size = UDim2.new(0.1,-20,0,SPEED_LABEL_HEIGHT)
speedLabel.Position = UDim2.new(0,PADDING,0,TITLE_HEIGHT+PADDING)
speedLabel.Text = "Speed Value: 29"
speedLabel.Font = Enum.Font.GothamBold
speedLabel.TextSize = 14
speedLabel.TextColor3 = Color3.fromRGB(150,150,255)
speedLabel.BackgroundTransparency = 1
speedLabel.TextXAlignment = Enum.TextXAlignment.Left
speedLabel.Parent = innerFrame

--======================== BOTÃO =========================--

local speedBtn = Instance.new("TextButton")
speedBtn.Size = UDim2.new(1,-30,0,BUTTON_HEIGHT)
speedBtn.Position = UDim2.new(0,PADDING,0,TITLE_HEIGHT+PADDING*2+SPEED_LABEL_HEIGHT)
speedBtn.BackgroundColor3 = Color3.fromRGB(45,45,60)
speedBtn.AutoButtonColor = false
speedBtn.Parent = innerFrame
Instance.new("UICorner", speedBtn).CornerRadius = UDim.new(0,8)

local speedText = Instance.new("TextLabel")
speedText.Size = UDim2.new(1,-65,1,0)
speedText.Position = UDim2.new(0,2,0,0)
speedText.Text = "Speed Boost ("..TOGGLE.Name.."): OFF"
speedText.Font = Enum.Font.GothamBold
speedText.TextSize = 14
speedText.TextColor3 = Color3.fromRGB(255,255,255)
speedText.BackgroundTransparency = 1
speedText.Parent = speedBtn

local footer = Instance.new("TextLabel")
footer.Size = UDim2.new(1,-20,0,18)
footer.Position = UDim2.new(0, PADDING, 0, TITLE_HEIGHT + PADDING*3 + SPEED_LABEL_HEIGHT + BUTTON_HEIGHT - 8)
footer.BackgroundTransparency = 1
footer.Text = "Discord WazixHUB"
footer.TextColor3 = Color3.fromRGB(180, 180, 255)
footer.Font = Enum.Font.GothamBold
footer.TextSize = 12
footer.TextXAlignment = Enum.TextXAlignment.Left
footer.Parent = innerFrame


local toggleTrack = Instance.new("Frame")
toggleTrack.Size = UDim2.new(0,53,0,25)
toggleTrack.Position = UDim2.new(1,-8,0.5,0)
toggleTrack.AnchorPoint = Vector2.new(1,0.5)
toggleTrack.BackgroundColor3 = Color3.fromRGB(100,100,100)
toggleTrack.Parent = speedBtn
Instance.new("UICorner", toggleTrack).CornerRadius = UDim.new(1,0)

local toggleCircle = Instance.new("Frame")
toggleCircle.Size = UDim2.new(0,18,0,18)
toggleCircle.Position = UDim2.new(0,4,0.5,0)
toggleCircle.AnchorPoint = Vector2.new(0,0.5)
toggleCircle.BackgroundColor3 = Color3.fromRGB(255,255,255)
toggleCircle.Parent = toggleTrack
Instance.new("UICorner", toggleCircle).CornerRadius = UDim.new(1,0)

--======================== ANIMAÇÃO DO TOGGLE =========================--

local function UpdateToggle(active)
    local trackColor = active and Color3.fromRGB(60,180,60) or Color3.fromRGB(100,100,100)

    local posOff = 4  -- a posição que você quer no OFF
    local posOn = toggleTrack.AbsoluteSize.X - toggleCircle.AbsoluteSize.X - 4

    local finalX = active and posOn or posOff

    TweenService:Create(toggleTrack, TweenInfo.new(0.25), {
        BackgroundColor3 = trackColor
    }):Play()

    TweenService:Create(toggleCircle, TweenInfo.new(0.25), {
        Position = UDim2.new(0, finalX, 0.5, 0)
    }):Play()

    speedText.Text = active and "Speed Boost ("..TOGGLE.Name.."): ON"
        or "Speed Boost ("..TOGGLE.Name.."): OFF"
end

--==================== CHILLI BOOST ENGINE ======================--

local function GetMoveDir()
	local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
	return hum and hum.MoveDirection or Vector3.zero
end

local function StartSpeed()
	if SpeedConn then return end

	SpeedConn = RunService.RenderStepped:Connect(function()

		local char = player.Character
		if not char then return end

		local hum = char:FindFirstChildOfClass("Humanoid")
		local hrp = char:FindFirstChild("HumanoidRootPart")
		if not hum or not hrp then return end

		local dir = GetMoveDir()

		if dir.Magnitude > 0 then
			local vx = dir.X * SPEED
			local vz = dir.Z * SPEED
			local vy = hrp.AssemblyLinearVelocity.Y

			hrp.AssemblyLinearVelocity = Vector3.new(vx, vy, vz)
		end

		hrp.AssemblyAngularVelocity = Vector3.zero
	end)
end

local function StopSpeed()
	if SpeedConn then
		SpeedConn:Disconnect()
		SpeedConn = nil
	end
end

local function Toggle()
	Enabled = not Enabled
	UpdateToggle(Enabled)

	if Enabled then StartSpeed() else StopSpeed() end
end

--==================== FIX REAL (SEM AUTO RESET) ======================--

player.CharacterAdded:Connect(function(char)
	task.wait(0.3)
	
	local hum = char:FindFirstChildOfClass("Humanoid")
	if hum then
		-- apenas garante valores padrão ao nascer
		hum.WalkSpeed = 16
		hum.JumpPower = 50
	end
end)

--==================== CONTROLES ======================--

speedBtn.MouseButton1Click:Connect(Toggle)

UIS.InputBegan:Connect(function(input,gp)
	if gp then return end
	if input.KeyCode == TOGGLE then Toggle() end
end)

--==================== INICIALIZAÇÃO ======================--

UpdateToggle(false)
Toggle()
Toggle()
